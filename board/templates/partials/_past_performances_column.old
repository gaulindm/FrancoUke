<div class="board-column" style="flex: 0 0 300px; background: #fff3e0; border-radius: 6px; padding: 10px;">
  <h4>üé≠ Past Performances</h4>
  <div class="sortable-list" data-column-id="{{ column.id }}">
    {% for item in column.items.all|dictsort:"position" %}
      <div class="card" style="background:white; padding:10px; margin-bottom:10px; border-radius:4px; cursor:pointer;"
           data-bs-toggle="modal" data-bs-target="#eventModal{{ item.id }}">
           
           {% if item.cover_photo %}
           <img src="{{ item.cover_photo.image.url }}" alt="{{ item.title }}" style="width:100%; border-radius:4px;">
         {% elif item.media_file %}
           <img src="{{ item.media_file.url }}" alt="{{ item.title }}" style="width:100%; border-radius:4px;">
         {% else %}
           <div style="background:#eee; padding:20px; text-align:center; border-radius:4px; color:#888;">
             ‚ùå No image available
           </div>
         {% endif %}

        <strong>{{ item.title }}</strong><br>
        {{ item.sdescription|linebreaks }}
        <small class="text-muted">
          <p><strong>Date:</strong> {{ item.event_date|date:"M d, Y" }}</p>
          {% if item.start_time %}
            <p><strong>Time:</strong> {{ item.start_time|time:"g:i A" }}
              {% if item.end_time %} - {{ item.end_time|time:"g:i A" }}{% endif %}
            </p>
          {% endif %}
          
        </small>
      </div>

      <!-- Modal for this event -->
      <div class="modal fade" id="eventModal{{ item.id }}" tabindex="-1" aria-labelledby="eventModalLabel{{ item.id }}" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="eventModalLabel{{ item.id }}">{{ item.title }}</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              {% if item.cover_photo %}
                <img src="{{ item.cover_photo.image.url }}" alt="{{ item.title }}" class="img-fluid mb-3 rounded">
              {% endif %}

              <p><strong>Date:</strong> {{ item.event_date|date:"M d, Y" }}</p>
           
              {% if item.start_time %}
                <p><strong>Time:</strong> {{ item.start_time|time:"g:i A" }}{% if item.end_time %} - {{ item.end_time|time:"g:i A" }}{% endif %}</p>
              {% endif %}

              {% if item.arrive_by %}
                <p><strong>Arrive By:</strong> {{ item.arrive_by|time:"g:i A" }}</p>
              {% endif %}

              <div class="description-preview">
                <div class="short-text" style="max-height: 4.5em; overflow: hidden;">
                  {{ item.rich_description|safe }}
                </div>
                <div class="full-text d-none">
                  {{ item.rich_description|safe }}
                </div>
                <a href="#" class="toggle-description">See more</a>
              </div>

              {% if item.youtube_embed_url %}
                <div class="ratio ratio-16x9 my-3">
                  <iframe src="{{ item.youtube_embed_url }}" title="YouTube video" allowfullscreen></iframe>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll(".toggle-description").forEach(function(toggle) {
      toggle.addEventListener("click", function(e) {
        e.preventDefault();
        const preview = this.closest(".description-preview");
        const shortText = preview.querySelector(".short-text");
        const fullText = preview.querySelector(".full-text");
  
        if (fullText.classList.contains("d-none")) {
          shortText.classList.add("d-none");
          fullText.classList.remove("d-none");
          this.textContent = "See less";
        } else {
          shortText.classList.remove("d-none");
          fullText.classList.add("d-none");
          this.textContent = "See more";
        }
      });
    });
  });
  </script>
  
