{% extends 'base_uke4ia.html' %}
{% load board_extras %}

{% block content %}
<link href="https://cdn.jsdelivr.net/npm/lightbox2@2/dist/css/lightbox.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/lightbox2@2/dist/js/lightbox-plus-jquery.min.js"></script>

<div class="board-row">
  {% include 'partials/_other_board_columns.html' %}
</div>

<!-- Event Modal -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="eventModalLabel">Event Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="eventModalContent">
        <p class="text-muted">Loading...</p>
      </div>
    </div>
  </div>
</div>


<style>
.board-row {
  display: flex !important;
  flex-direction: row !important;
  flex-wrap: nowrap !important;   /* ‚úÖ never wrap to new row */
  gap: 20px;
  align-items: flex-start;
  justify-content: flex-start;    /* ‚úÖ don‚Äôt spread to edges */
  overflow-x: auto;
  padding-bottom: 20px;
  /*border: 2px dashed red;         /üîç temp debug: make container visible */
}

.board-column {
  flex: 0 0 300px !important;     /* ‚úÖ force fixed width */
  max-width: 300px !important;
  background: #f9f9f9;
  border-radius: 6px;
  padding: 10px;
  border: 2px solid blue;         /* üîç temp debug: make each column visible */
}
.board-message.equipment {
    border-left: 4px solid #2c7be5;
    background-color: #f9fcff;
    padding: 0.75rem;
    margin-bottom: 1rem;
}

/* Light blue tint for board messages */
.message-card {
  background-color: #469cf1;  /* very light blue */
  border: 1px solid #b6d4fe; /* soft blue border */
}

.board-message .message-body img {
    max-width: 100%;
    height: auto;
}

.card img {
  cursor: pointer;
  transition: transform 0.2s ease-in-out;
}
.card img:hover {
  transform: scale(1.03);
}
.event-gallery, .gallery {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.event-gallery img.thumbnail,
.gallery img.thumbnail {
  max-width: 200px;
  border-radius: 6px;
  cursor: pointer;
  transition: transform 0.2s ease-in-out;
  object-fit: cover;
}

.event-gallery img.thumbnail:hover,
.gallery img.thumbnail:hover {
  transform: scale(1.05);
}
</style>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Attach AJAX to availability forms inside modal
    document.addEventListener("submit", function (e) {
      if (e.target.matches(".availability-form")) {
        e.preventDefault();
        const form = e.target;
        const formData = new FormData(form);
  
        fetch(form.action, {
          method: "POST",
          headers: { "X-CSRFToken": getCookie("csrftoken") },
          body: formData,
        })
        .then(res => res.json())
        .then(data => {
          if (data.success) {
            alert("Availability updated: " + data.status);
          }
        });
      }
    });
  });
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const eventId = params.get("event");
      if (eventId) {
        const modal = new bootstrap.Modal(document.getElementById(`eventModal${eventId}`));
        modal.show();
      }
    });
    </script>
    
    
  
{% endblock %}
