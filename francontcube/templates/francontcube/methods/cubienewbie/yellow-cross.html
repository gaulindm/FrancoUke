{% extends "francontcube/partials/base.html" %}
{% load static %}

{% block title %}La croix jaune â€” Francontcube{% endblock %}

{% block content %}
<div class="container py-5">

    <!-- Titre principal -->
    <div class="text-center mb-5">
        <h1 class="hero-title">
            Ã‰tape 4 : <span class="brand-green">La croix jaune</span>
        </h1>
        <p class="lead text-muted">
            Orienter les arÃªtes du haut pour former une croix jaune sur la face supÃ©rieure.
        </p>
    </div>

    <!-- Charger le template SVG (cachÃ©) -->
    {% include "cube/partials/_cube_svg.html" %}

    <!-- Section Objectif -->
    <div class="card p-4 mb-4">
        <h3 class="brand-green">ğŸ¯ Objectif</h3>
        <p>
            Former une <strong>croix jaune</strong> sur la face du haut. Les 4 arÃªtes autour du centre jaune 
            doivent avoir leur face jaune qui regarde vers le haut.
        </p>

        <div class="row mt-3">
            <div class="col-md-6 text-center mb-3">
                <h5>Avant : Deux couches complÃ¨tes</h5>
                <div id="cube-container-before" class="cube-small"></div>
                <p><small class="text-muted">F2L terminÃ©</small></p>
            </div>
            <div class="col-md-6 text-center mb-3">
                <h5>AprÃ¨s : Croix jaune</h5>
                <div id="cube-container-goal" class="cube-small"></div>
                <p><small class="text-muted">4 arÃªtes jaunes forment une croix</small></p>
            </div>
        </div>

        <div class="alert alert-info mt-3">
            <strong>ğŸ“ Note importante :</strong> Ã€ cette Ã©tape, ne t'inquiÃ¨te <strong>pas</strong> 
            des couleurs sur les cÃ´tÃ©s des arÃªtes. On veut juste que les faces jaunes regardent vers le haut. 
            Les couleurs des cÃ´tÃ©s seront arrangÃ©es Ã  l'Ã©tape suivante!
        </div>
    </div>

    <!-- Section Les 4 cas -->
    <div class="card p-4 mb-4">
        <h3 class="brand-green">ğŸ” Les 4 cas possibles</h3>
        <p>
            Regarde ta face jaune du haut. Tu auras l'un de ces 4 motifs. Utilise <strong>un seul algorithme</strong> 
            pour tous les cas!
        </p>

        <div class="row mt-3">
            <!-- Cas 1: Point -->
            <div class="col-md-6 col-lg-3 mb-3">
                <div class="text-center">
                    <div id="cube-pattern-dot" class="cube-case"></div>
                    <h6 class="mt-2 fw-bold">1. Point</h6>
                    <p class="small">Aucune arÃªte jaune<br>Fais l'algo 3 fois</p>
                </div>
            </div>

            <!-- Cas 2: L -->
            <div class="col-md-6 col-lg-3 mb-3">
                <div class="text-center">
                    <div id="cube-pattern-l" class="cube-case"></div>
                    <h6 class="mt-2 fw-bold">2. Forme L</h6>
                    <p class="small">2 arÃªtes adjacentes<br>Fais l'algo 2 fois</p>
                </div>
            </div>

            <!-- Cas 3: Ligne -->
            <div class="col-md-6 col-lg-3 mb-3">
                <div class="text-center">
                    <div id="cube-pattern-line" class="cube-case"></div>
                    <h6 class="mt-2 fw-bold">3. Ligne</h6>
                    <p class="small">2 arÃªtes opposÃ©es<br>Fais l'algo 1 fois</p>
                </div>
            </div>

            <!-- Cas 4: Croix -->
            <div class="col-md-6 col-lg-3 mb-3">
                <div class="text-center">
                    <div id="cube-pattern-cross" class="cube-case"></div>
                    <h6 class="mt-2 fw-bold">4. Croix</h6>
                    <p class="small">DÃ©jÃ  fait!<br>Passe Ã  l'Ã©tape suivante</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Section L'algorithme -->
    <div class="card p-4 mb-4 border-success">
        <h3 class="brand-green">ğŸ”„ L'algorithme magique</h3>
        <p>
            <strong>Un seul algorithme pour tous les cas!</strong> RÃ©pÃ¨te-le simplement 1, 2 ou 3 fois 
            selon ton motif de dÃ©part.
        </p>

        <div class="text-center p-4 bg-light rounded border border-success border-3 mt-3">
            <h2 class="mb-0">
                <code class="fs-1 text-success">F R U R' U' F'</code>
            </h2>
            <p class="mt-3 mb-0"><small>(Sexy move avec F au dÃ©but et Ã  la fin)</small></p>
        </div>

        <div class="alert alert-success mt-3">
            <strong>DÃ©composition :</strong>
            <ul class="mb-0 mt-2">
                <li><code>F</code> = Tourne la face avant (90Â° horaire)</li>
                <li><code>R U R' U'</code> = Le fameux "sexy move" que tu connais bien!</li>
                <li><code>F'</code> = DÃ©fais le premier F (90Â° anti-horaire)</li>
            </ul>
        </div>
    </div>

    <!-- Section Instructions dÃ©taillÃ©es -->
    <div class="card p-4 mb-4">
        <h3 class="brand-green">ğŸ“‹ Instructions selon ton cas</h3>

        <div class="accordion" id="casesAccordion">
            <!-- Cas Point -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#caseDot">
                        <strong>Cas 1 : Point (aucune arÃªte jaune)</strong>
                    </button>
                </h2>
                <div id="caseDot" class="accordion-collapse collapse show" data-bs-parent="#casesAccordion">
                    <div class="accordion-body">
                        <ol>
                            <li>Fais <code>F R U R' U' F'</code></li>
                            <li>Tu obtiens maintenant un <strong>L</strong></li>
                            <li>Continue avec les instructions du cas L...</li>
                        </ol>
                        <p class="mb-0 text-muted">
                            <em>Total : Tu feras l'algorithme 3 fois (Point â†’ L â†’ Ligne â†’ Croix)</em>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Cas L -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#caseL">
                        <strong>Cas 2 : Forme L (2 arÃªtes adjacentes)</strong>
                    </button>
                </h2>
                <div id="caseL" class="accordion-collapse collapse" data-bs-parent="#casesAccordion">
                    <div class="accordion-body">
                        <ol>
                            <li><strong>Positionne le L :</strong> Les 2 arÃªtes jaunes doivent Ãªtre Ã  <strong>gauche et en bas</strong> 
                                (forme un L qui "regarde" vers le haut-droite)</li>
                            <li>Fais <code>F R U R' U' F'</code></li>
                            <li>Tu obtiens maintenant une <strong>Ligne horizontale</strong></li>
                            <li>Continue avec les instructions de la ligne...</li>
                        </ol>
                        <p class="mb-0 text-muted">
                            <em>Total : Tu feras l'algorithme 2 fois (L â†’ Ligne â†’ Croix)</em>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Cas Ligne -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#caseLine">
                        <strong>Cas 3 : Ligne (2 arÃªtes opposÃ©es)</strong>
                    </button>
                </h2>
                <div id="caseLine" class="accordion-collapse collapse" data-bs-parent="#casesAccordion">
                    <div class="accordion-body">
                        <ol>
                            <li><strong>Positionne la ligne :</strong> La ligne doit Ãªtre <strong>horizontale</strong> 
                                (de gauche Ã  droite, parallÃ¨le Ã  toi)</li>
                            <li>Fais <code>F R U R' U' F'</code></li>
                            <li><strong>TerminÃ©!</strong> Tu as maintenant la croix jaune! ğŸ‰</li>
                        </ol>
                        <p class="mb-0 text-muted">
                            <em>Total : Tu fais l'algorithme 1 seule fois (Ligne â†’ Croix)</em>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Cas Croix -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#caseCross">
                        <strong>Cas 4 : Croix (dÃ©jÃ  complÃ¨te)</strong>
                    </button>
                </h2>
                <div id="caseCross" class="accordion-collapse collapse" data-bs-parent="#casesAccordion">
                    <div class="accordion-body">
                        <p><strong>FÃ©licitations!</strong> Tu as dÃ©jÃ  la croix jaune. Passe directement Ã  l'Ã©tape suivante!</p>
                        <p class="mb-0">
                            Note : C'est rare d'avoir la croix dÃ¨s le dÃ©but, mais Ã§a peut arriver. 
                            Profite de ta chance! ğŸ€
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Section Technique -->
    <div class="card p-4 mb-4 border-success">
        <h3 class="brand-green">âœ‹ Technique de prise</h3>
        <div class="alert alert-success mb-0">
            <strong>Pour F R U R' U' F' :</strong>
            <ul class="mb-0 mt-2">
                <li>Main gauche : Tiens le cube et fait <code>F</code> et <code>F'</code> avec l'index</li>
                <li>Main droite : Fait <code>R U R' U'</code> (le sexy move que tu connais bien!)</li>
                <li><strong>C'est essentiellement le sexy move avec un F au dÃ©but et Ã  la fin</strong></li>
                <li>Pratique jusqu'Ã  ce que ce soit fluide - c'est un algorithme que tu utiliseras souvent!</li>
            </ul>
        </div>
    </div>

    <!-- Section Conseils -->
    <div class="card p-4 mb-4">
        <h3 class="brand-green">ğŸ’¡ Conseils utiles</h3>
        <ul class="mt-3">
            <li>
                <strong>L'orientation du motif est importante!</strong> Pour le L, assure-toi qu'il est 
                en bas-gauche. Pour la ligne, assure-toi qu'elle est horizontale.
            </li>
            <li>
                <strong>Si tu fais l'algorithme et que rien ne se passe comme prÃ©vu,</strong> 
                vÃ©rifie l'orientation de ton motif et rÃ©essaie.
            </li>
            <li>
                <strong>MÃ©morise cet algorithme!</strong> <code>F R U R' U' F'</code> - 
                tu vas l'utiliser aussi pour d'autres Ã©tapes avancÃ©es.
            </li>
            <li>
                <strong>Ne t'inquiÃ¨te pas si les couleurs des cÃ´tÃ©s ne correspondent pas.</strong> 
                C'est normal! On va les arranger Ã  l'Ã©tape suivante.
            </li>
            <li>
                <strong>Une fois la croix jaune faite,</strong> tu as complÃ©tÃ© 75% du cube! 
                Plus que 3 Ã©tapes! ğŸš€
            </li>
        </ul>
    </div>

    <!-- Bouton de navigation -->
    <div class="text-center">
        <a href="{% url 'francontcube:second_layer' %}" class="btn btn-outline-primary">
            â† Retour : La deuxiÃ¨me couche
        </a>
        <a href="{% url 'francontcube:method_cubienewbie' %}" class="btn btn-outline-secondary ms-2">
            Vue d'ensemble
        </a>
        <a href="#" class="btn btn-success ms-2">
            Ã‰tape suivante : La face jaune â†’
        </a>
    </div>
</div>

<!-- Charger la logique JavaScript -->
<script src="{% static 'cube/js/cube.js' %}"></script>

<!-- Styles CSS pour les cubes -->
<style>
.cube-small svg {
    max-width: 275px;
    height: auto;
}

.cube-case svg {
    max-width: 180px;
    height: auto;
}

@media (max-width: 768px) {
    .cube-small svg {
        max-width: 200px;
    }
    
    .cube-case svg {
        max-width: 150px;
    }
}
</style>

<!-- Script d'initialisation de la page -->
<script>
document.addEventListener("DOMContentLoaded", () => {
    // InsÃ©rer les cubes avec des IDs uniques et les colorier
    insertCubeInContainer('cube-container-before', setF2LComplete, 'before');
    insertCubeInContainer('cube-container-goal', setYellowCrossHighlighted, 'goal');
    
    // Les 4 motifs possibles
    insertCubeInContainer('cube-pattern-dot', setYellowCrossDot, 'dot');
    insertCubeInContainer('cube-pattern-l', setYellowCrossLShape, 'lshape');
    insertCubeInContainer('cube-pattern-line', setYellowCrossLine, 'line');
    insertCubeInContainer('cube-pattern-cross', setYellowCross, 'cross');
});
</script>

{% endblock %}