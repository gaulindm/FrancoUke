{% extends base_template|default:"base.html" %}
{% load static %}

{% block content %}
    <div class="row g-0">

        <!-- Print Preview -->
        <div class="col-md-8 col-12 p-2 bg-light d-flex justify-content-center align-items-center">
            <iframe id="pdf-preview"
                src="{% url site_namespace|add:':preview_pdf' score.id %}?transpose=0"
                width="100%"
                height="80%"
                style="border: none; min-height: 90vh;">
            </iframe>
        </div>

        <!-- Control Panel -->
        <div class="col-md-4 col-12 p-3 bg-white border-start">
            {% include "partials/_control_panel.html" %}
        </div>
    </div>

    <!-- Optional debug output (hidden by default) -->
    <pre id="iframe-debug" style="display:none; color:green; font-size:12px;"></pre>

    <script>
        const debugEl = document.getElementById("iframe-debug");
        const pdfEl = document.getElementById("pdf-preview");
        if (debugEl && pdfEl) {
            debugEl.innerText = pdfEl.src;
        }
        console.log("PDF preview iframe source:", pdfEl.src);
    </script>
{% endblock %}
