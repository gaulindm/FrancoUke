{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Chord Dictionary</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Remove padding inside table cells */
        .chord-cell {
            padding: 4px !important;
            vertical-align: top;
            min-width: 110px;
        }
        
        /* Chord name spacing */
        .chord-title {
            margin: 0;
            padding: 0;
            line-height: 1.0;
            font-size: 0.80rem;
        }
        
        /* Remove block spacing around main diagram */
        .main-chord {
            margin: 0;
            padding: 0;
            line-height: 0;
        }
        
        /* Remove spacing inside SVG wrapper */
        .main-chord svg,
        .small-chord svg {
            display: block;      /* Removes inline space */
            margin: 0;
            padding: 0;
        }
        
        /* Size adjustments */
        .main-chord svg {
            width: 90px;
        }
        
        .small-chord svg {
            width: 55px;
        }
        
        /* Layout of small variations */
        .small-chords {
            margin-top: 2px;
            gap: 4px !important;   /* tighter spacing */
        }
        
        /* Very important: remove default Bootstrap cell spacing */
        .table td, .table th {
            padding: 4px !important;
        }
        </style>
        
               
        
</head>

<body>
{% include "partials/_navbar.html" %}

<div class="container mt-4">
    <h2>{{ instrument|title }} Chord Dictionary</h2>

    <form method="get" class="mb-3 d-flex gap-3 align-items-center">

        <!-- Instrument dropdown -->
        <select name="instrument" class="form-select d-inline-block w-auto">
            {% for instr in instruments %}
                <option value="{{ instr }}" {% if instr == instrument %}selected{% endif %}>
                    {{ instr|title }}
                </option>
            {% endfor %}
        </select>
    
        <!-- Lefty toggle -->
        <label class="form-check-label">
            <input type="checkbox" name="lefty" value="1"
                   class="form-check-input"
                   {% if lefty %}checked{% endif %}>
            Left-handed
        </label>
    
        <label class="form-check-label ms-3">
            <input type="checkbox" name="show_alt" value="1"
                   class="form-check-input"
                   {% if show_alt %}checked{% endif %}>
            Show Alternate Fingerings
        </label>
    
        <button class="btn btn-primary">Update</button>
    </form>
    <ul class="nav nav-tabs mb-3">
        {% for key, type_list in CHORD_TABS.items %}
            <li class="nav-item">
                <a class="nav-link {% if key == tab %}active{% endif %}"
                   href="?instrument={{ instrument }}&lefty={{ lefty|yesno:'1,0' }}&tab={{ key }}">
                    {{ key|title }}
                </a>
            </li>
        {% endfor %}
    </ul>    

    <table class="table table-bordered">
        <tr>
            <th>Type</th>
            {% for root in roots %}
                <th>{{ root }}</th>
            {% endfor %}
        </tr>
    
        {% for row in rows %}
        <tr>
            <td><strong>{{ row.type }}</strong></td>
    
            {% for cell in row.cells %}
            <td class="chord-cell text-center">

                {% if cell %}
                    <div class="chord-title fw-bold">{{ cell.name }}</div>
            
                    <div class="main-chord">
                        {% if cell.main_svg %}
                            {{ cell.main_svg|safe }}
                        {% endif %}
                    </div>
            
                    {% if show_alt and cell.small_svgs %}
                    <div class="small-chords d-flex justify-content-center gap-2">
                        {% for svg in cell.small_svgs %}
                            <div class="small-chord">
                                {{ svg|safe }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
                
                {% endif %}
            
            </td>
            
            
            
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
    
</div>
</body>
</html>
